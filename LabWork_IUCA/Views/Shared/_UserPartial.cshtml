
@using Microsoft.AspNetCore.Identity
@using WebLabsV04.DAL.Entities

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager

<ul class="navbar-nav">
    @if (SignInManager.IsSignedIn(User))
    {
        <div class="dropdown ml-4 nav-color">
            <div class="dropdown-toggle"
                 id="dropdownMenuButton"
                 data-toggle="dropdown" aria-haspopup="true"
                 aria-expanded="false">

                <img src="@Url.Action("GetAvatar","Image")"
                     width="30" alt="User"
                     class="rounded bg-light" />

            </div>

            <div class="dropdown-menu"
                 aria-labelledby="dropdownMenuButton">

                <div class="dropdown-item-text">
                    <img src="@Url.Action("GetAvatar","Image")"
                         width="50" alt="User" class="rounded" />

                    @User.Identity.Name
                </div>

                <div class="dropdown-divider"></div>

                <a class="dropdown-item" asp-controller="Product"
                   asp-action="UserProducts">
                    Мои
                    товары
                </a>
                <form asp-area="Identity"
                      asp-page="/Account/Logout"
                      asp-route-returnurl="@ViewContext.HttpContext.Request.Path">

                    <input type="submit"
                           value="Log off"
                           class="dropdown-item" />

                </form>
            </div>
            
        </div>
     
      }
      else
      {
            <li class="nav-item">
                <a class="nav-link text-white" id="register" asp-area="Identity" asp-page="/Account/Register">Register</a>
            </li>
            <li class="nav-item">
                <a class="nav-link text-white" id="login" asp-area="Identity" asp-page="/Account/Login">Login</a>
            </li>
       }
</ul>